/*
 * This Kotlin source file was generated by the Gradle 'init' task.
 */
package bilboka.messagebot

import io.mockk.impl.annotations.InjectMockKs
import io.mockk.impl.annotations.MockK
import io.mockk.junit5.MockKExtension
import io.mockk.justRun
import io.mockk.verify
import org.junit.jupiter.api.BeforeEach
import org.junit.jupiter.api.Disabled
import org.junit.jupiter.api.Test
import org.junit.jupiter.api.extension.ExtendWith

@ExtendWith(MockKExtension::class)
class MessageBotTest {

    @MockK
    lateinit var carBookExecutor: CarBookExecutor

    @MockK
    lateinit var botMessenger: BotMessenger

    @InjectMockKs
    lateinit var messagebot: MessageBot

    private val senderID = "1267"

    @BeforeEach
    fun setupMessenger() {
        justRun { botMessenger.sendMessage(any(), any()) }
    }

    @Test
    fun sendHei_returnsHei() {
        messagebot.processMessage("Hei", senderID)

        verify { botMessenger.sendMessage("Hei", senderID) }
    }

    @Test
    fun sendSkjer_returnsIkkenospes() {
        messagebot.processMessage("Skjer?", senderID)

        verify { botMessenger.sendMessage("Ikke noe spes. Der?", senderID) }
    }

    @Test
    fun sendSomethingStrange_returnsDefaultMessage() {
        messagebot.processMessage("Her kommer en rar melding", senderID)

        verify { botMessenger.sendMessage("Forstod ikke helt hva du mente, pr√∏v igjen.", senderID) }
    }
}
